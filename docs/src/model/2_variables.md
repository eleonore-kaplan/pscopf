# Variables and Their Linking Constraints

This page introduces the decision variables and their linking constraints.

Variables directly included in the objective function are marked by (*).

## Limitable Units

```math
P_{lim}(gen,ts) \in R_+ \\
\forall gen \in LIMITABLES, \forall ts \in TS,\\
```
is the the decided limit for the limitable unit $gen$ at time step $ts$.
 Note that this value is common to all scenarios

---


```math
B_{is\_limited}(gen,ts,s) \in \{0,1\} \\
\forall gen \in LIMITABLES, \forall ts \in TS, \forall s \in S,\\
```
is a binary variable equal to $1$ if the limitable unit $gen$ is limited at time step $ts$ for scenario $s$.


---


```math
P_{is\_limited\_x\_Plim}(gen,ts,s) = B_{is\_limited}(gen,ts,s) * P_{lim}(gen,ts) \\
\forall gen \in LIMITABLES, \forall ts \in TS, \forall s \in S, \\
```
The expression is ensured by the constraints :
```math
\begin{aligned}
&P_{is\_limited\_x\_Plim}(gen,ts,s) \le P_{lim}(gen,ts) \\
&P_{is\_limited\_x\_Plim}(gen,ts,s) \le M * B_{is\_limited}(gen,ts,s) \\
&(1 - B_{is\_limited}(gen,ts,s)) M + P_{is\_limited\_x\_Plim}(gen,ts,s) \ge P_{lim}(gen,ts)
\end{aligned}
```


---


```math
P_{enr}(gen,ts,s) =  min( P_{lim}(gen,ts), prod(gen, date, ts, s) ) \\
\forall gen \in LIMITABLES, \forall ts \in TS, \forall s \in S, \\
```
is the actual injected power by the limitable unit $gen$ at time step $ts$ for scenario $s$.
The constraints relative to this expression are:
```math
\begin{aligned}
&P_{enr}(gen,ts,s) \in [0, prod(gen, date, ts, s)] \\
&P_{enr}(gen,ts,s) \le P_{lim}(gen,ts) \\
&P_{enr}(gen,ts,s) = (1-B_{is\_limited}(gen,ts,s)) * prod(gen, date, ts, s) + P_{is\_limited\_x\_Plim}(gen,ts,s)
\end{aligned}
```

---


```math
(*) C_{lim}(gen,ts,s) = max(0, prod(gen, date, ts, s) - P_{lim}(gen,ts)) \\
\forall gen \in LIMITABLES, \forall ts \in TS, \forall s \in S, \\
```
is the severed power lost due to limiting the production of a limitable unit $gen$ at time step $ts$ and in the scenario $s$.
The expression is assured by:
```math
C_{lim}(gen,ts,s) \ge prod(gen, date, ts, s) - P_{lim}(gen,ts)
```

---


## Imposable Units


```math
P_{imp}(gen,ts) \in [p_{min}(gen),p_{max}(gen)] \\
\forall gen \in IMPOSABLES, \forall ts \in TS,\\
```
is the the decided production level of the imposable unit $gen$ at time step $ts$.
 Note that this value is common to all scenarios.
 CHECK : The value is null, if the production level was not imposed.

---


```math
B_{is\_imposed}(gen,ts) \in \{0,1\} \\
\forall gen \in IMPOSABLES, \forall ts \in TS,\\
```
is a binary variable equal to $1$ if the imposable unit $gen$ has an imposed level at time step $ts$.


---


```math
B_{start}(gen,ts) \in \{0,1\} \\
\forall gen \in IMPOSABLES, \forall ts \in TS,\\
```
is a binary variable equal to $1$ if the imposable unit $gen$ was started at time step $ts$.


---


```math
B_{on}(gen,ts) \in \{0,1\} \\
\forall gen \in IMPOSABLES, \forall ts \in TS,\\
```
is a binary variable equal to $1$ if the imposable unit $gen$ is working at time step $ts$.

```math
\begin{aligned}
&B_{start}(gen, ts) \le B_{on}(gen, ts) \\
&B_{start}(gen, ts) \le 1 - B_{on}(gen, ts-1) \\
&B_{start}(gen, ts) \ge B_{on}(gen, ts) - B_{on}(gen, ts-1) \\
\end{aligned}
```

Note that these do not apply on the first time step.


---


```math
B_{is\_imposed\_and\_on}(gen,ts) =  B_{is\_imposed}(gen,ts) \quad {AND} \quad B_{on}(gen,ts) \\
\forall gen \in IMPOSABLES, \forall ts \in TS,\\
```
is a binary variable equal to $1$ if the imposable unit $gen$ is working with an imposed level at time step $ts$.

The AND expressions is assured by the following constraints:
```math
\begin{aligned}
&P_{is\_imposed\_and\_on}(gen, ts) \le B_{is\_imposed}(gen, ts) \\
&P_{is\_imposed\_and\_on}(gen, ts) \le B_{on}(gen, ts) \\
&1 + B_{is\_imposed\_and\_on}(gen, ts) \ge B_{on}(gen, ts) + B_{is\_imposed}(gen, ts) \\
\end{aligned}
```

The latter introduced binary variable, helps express the bounding constraints on the limiting power :

```math
\begin{aligned}
&P_{imp}(gen, ts) \le p_{max} * B_{is\_imposed\_and\_on}[gen, ts] \\
&P_{imp}(gen, ts) \ge p_{min} * B_{is\_imposed\_and\_on}[gen, ts] \\
\end{aligned}
```

---


```math
P_{imposable}(gen,ts,s) \in R_+ \\
\forall gen \in IMPOSABLES, \forall ts \in TS, \forall s \in S, \\
```
is the power effectively generated by the unit $gen$ at time step $ts$ and for scenario $s$.
If the production level was imposed this value will be equal for all scenarios at a given same time step $ts$. If not, it will be equal to the planned production level of the scenario.

$P_{imposable}(gen,ts,s) = (1-B_{is\_imposed}(gen,ts)) prod(gen,ts,s) + P_{imp}(gen,ts)$


---


```math
(*) C_{imp\_neg}(gen,ts,s) \in R_+ \\
\forall gen \in IMPOSABLES, \forall ts \in TS, \forall s \in S, \\
```
is the under production we imposed.


```math
(*) C_{imp\_pos}(gen,ts,s) \in R_+ \\
\forall gen \in IMPOSABLES, \forall ts \in TS, \forall s \in S, \\
```
is the over production we imposed.

This can be formulated as following :

$P_{imposable}(gen,ts,s) =  prod(gen,ts,s) + C_{imp\_pos}(gen,ts,s) - C_{imp\_neg}(gen,ts,s)$


---

## Reserves

CHECK : should not depend on scenario (unless it is just here to allow violating the EOD)

CHECK : not taken into account in flow limit constraint (delocalized reserve)

```math
(*) P_{reserve}(ts,s) \in [-p_{reserve}, p_{reserve}] \\
\forall ts \in TS, \forall s \in S, \\
```
is the decided level of reserve power at time step $ts$ for scenario $s$

